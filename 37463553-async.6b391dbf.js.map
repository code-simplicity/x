{"version":3,"sources":["docs/react/model-use-qwen.zh-CN.md?type=text"],"sourcesContent":["\n  import '/Users/dupeiyi/Project/private/x/packages/x/docs/react/model-use-qwen.zh-CN.md?watch=parent';\n  export const texts = [{\"value\":\"è¿™ç¯‡æŒ‡å—å°†ä»‹ç»å¦‚ä½•åœ¨ä½¿ç”¨ Ant Design X æ­å»ºçš„åº”ç”¨ä¸­æ¥å…¥ Qwen æä¾›çš„æ¨¡å‹æœåŠ¡ã€‚\",\"paraId\":0},{\"value\":\"Qwen çš„æ¨¡å‹æ¨ç†æœåŠ¡æ”¯æŒã€Œå…¼å®¹ OpenAI æ¨¡å¼ã€ã€‚è¯¦è§å®˜æ–¹æ–‡æ¡£: \",\"paraId\":1},{\"value\":\"é˜¿é‡Œäº‘ - é€šä¹‰åƒé—®\",\"paraId\":1},{\"value\":\"å¦‚ä½•è·å– baseURL - \",\"paraId\":2,\"tocIndex\":0},{\"value\":\"https://help.aliyun.com/zh/model-studio/getting-started/what-is-model-studio\",\"paraId\":2,\"tocIndex\":0},{\"value\":\"å¦‚ä½•è·å– API Key - \",\"paraId\":2,\"tocIndex\":0},{\"value\":\"https://help.aliyun.com/zh/model-studio/developer-reference/get-api-key\",\"paraId\":2,\"tocIndex\":0},{\"value\":\"æ¨¡å‹åˆ—è¡¨ - \",\"paraId\":2,\"tocIndex\":0},{\"value\":\"https://help.aliyun.com/zh/model-studio/getting-started/models\",\"paraId\":2,\"tocIndex\":0},{\"value\":\"æ˜¯æŒ‡åœ¨æ¥å£è®¾è®¡å’Œä½¿ç”¨æ–¹å¼ä¸Šä¸ OpenAI çš„ API ä¿æŒä¸€è‡´çš„æ¨¡å‹æ¨ç†æœåŠ¡ã€‚\",\"paraId\":3,\"tocIndex\":1},{\"value\":\"è¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥ä½¿ç”¨ä¸è°ƒç”¨ OpenAI æ¨¡å‹ç›¸åŒçš„ä»£ç å’Œæ–¹æ³•ï¼Œæ¥è°ƒç”¨è¿™äº›å…¼å®¹æœåŠ¡ï¼Œä»è€Œå‡å°‘å¼€å‘æ¥å…¥æˆæœ¬ã€‚\",\"paraId\":4,\"tocIndex\":1},{\"value\":\"ä½¿ç”¨URLæ¥å…¥æ¨¡å‹æ˜¯ X SDKæä¾›çš„åŸºç¡€èƒ½åŠ›ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹\",\"paraId\":5,\"tocIndex\":2},{\"value\":\"X SDK\",\"paraId\":6,\"tocIndex\":2},{\"value\":\"ã€‚\",\"paraId\":5,\"tocIndex\":2},{\"value\":\"æ³¨æ„: ğŸ”¥ \",\"paraId\":7,\"tocIndex\":5},{\"value\":\"dangerouslyAllowBrowser\",\"paraId\":7,\"tocIndex\":5},{\"value\":\" å­˜åœ¨å®‰å…¨é£é™©ï¼Œå¯¹æ­¤ openai-node çš„å®˜æ–¹æ–‡æ¡£æœ‰è¯¦ç»†çš„\",\"paraId\":7,\"tocIndex\":5},{\"value\":\"è¯´æ˜\",\"paraId\":7,\"tocIndex\":5},{\"value\":\"ã€‚\",\"paraId\":7,\"tocIndex\":5},{\"value\":\"import { Bubble, BubbleListProps, Sender } from '@ant-design/x';\\nimport {\\n  AbstractXRequestClass,\\n  OpenAIChatProvider,\\n  SSEFields,\\n  useXChat,\\n  XModelMessage,\\n  XModelParams,\\n  XRequestOptions,\\n} from '@ant-design/x-sdk';\\nimport { Flex } from 'antd';\\nimport OpenAI from 'openai';\\nimport React, { useState } from 'react';\\n\\ntype OutputType = Partial<Record<SSEFields, any>>;\\ntype InputType = XModelParams;\\n\\nclass OpenAiRequest<\\n  Input extends InputType = InputType,\\n  Output extends OutputType = OutputType,\\n> extends AbstractXRequestClass<Input, Output> {\\n  client: any;\\n  stream: OpenAI | undefined;\\n\\n  _isTimeout = false;\\n  _isStreamTimeout = false;\\n  _isRequesting = false;\\n\\n  constructor(baseURL: string, options: XRequestOptions<Input, Output>) {\\n    super(baseURL, options);\\n    this.client = new OpenAI({\\n      baseURL: 'https://dashscope.aliyuncs.com/compatible-mode/v1',\\n      apiKey: 'OPENAI_API_KEY',\\n      dangerouslyAllowBrowser: true,\\n    });\\n  }\\n  get asyncHandler(): Promise<any> {\\n    return Promise.resolve();\\n  }\\n  get isTimeout(): boolean {\\n    return this._isTimeout;\\n  }\\n  get isStreamTimeout(): boolean {\\n    return this._isStreamTimeout;\\n  }\\n  get isRequesting(): boolean {\\n    return this._isRequesting;\\n  }\\n  get manual(): boolean {\\n    return true;\\n  }\\n  async run(input: Input): Promise<void> {\\n    const { callbacks } = this.options;\\n    try {\\n      await this.client.responses.create({\\n        model: 'qwen-plus',\\n        messages: input?.messages || [],\\n        stream: true,\\n      });\\n\\n      // è¯·åŸºäº response å®ç° æµæ•°æ®æ›´æ–°é€»è¾‘\\n      // Please implement stream data update logic based on response\\n    } catch (error: any) {\\n      callbacks?.onError(error);\\n    }\\n  }\\n  abort(): void {\\n    // è¯·åŸºäºopenai å®ç° abort\\n    // Please implement abort based on OpenAI\\n  }\\n}\\n\\nconst provider = new OpenAIChatProvider<XModelMessage, InputType, OutputType>({\\n  request: new OpenAiRequest('OPENAI', {}),\\n});\\n\\nconst Demo: React.FC = () => {\\n  const [content, setContent] = useState('');\\n  const { onRequest, messages, isRequesting, abort } = useXChat({\\n    provider,\\n    requestPlaceholder: () => {\\n      return {\\n        content: 'loading...',\\n        role: 'assistant',\\n      };\\n    },\\n    requestFallback: (_, { error }) => {\\n      if (error.name === 'AbortError') {\\n        return {\\n          content: 'Request is aborted',\\n          role: 'assistant',\\n        };\\n      }\\n      return {\\n        content: error?.toString(),\\n        role: 'assistant',\\n      };\\n    },\\n  });\\n\\n  const items = messages.map(({ message, id }) => ({\\n    key: id,\\n    ...message,\\n  }));\\n\\n  const role: BubbleListProps['role'] = {\\n    assistant: {\\n      placement: 'start',\\n    },\\n    user: { placement: 'end' },\\n  };\\n\\n  return (\\n    <Flex\\n      vertical\\n      justify=\\\"space-between\\\"\\n      style={{\\n        height: 400,\\n        padding: 16,\\n      }}\\n    >\\n      <Bubble.List role={role} items={items} />\\n      <Sender\\n        value={content}\\n        onChange={setContent}\\n        loading={isRequesting}\\n        onCancel={abort}\\n        onSubmit={(val) => {\\n          onRequest({\\n            messages: [{ role: 'user', content: val }],\\n          });\\n          setContent('');\\n        }}\\n      />\\n    </Flex>\\n  );\\n};\\n\\nexport default Demo;\\n\",\"paraId\":8,\"tocIndex\":5}];\n  "],"names":[],"mappings":"6PAEe,6CAAA,QADN,YACA,IAAM,EAAQ,CAAC,CAAC,MAAQ,+LAAmD,OAAS,CAAC,EAAE,CAAC,MAAQ,sJAAwC,OAAS,CAAC,EAAE,CAAC,MAAQ,gDAAa,OAAS,CAAC,EAAE,CAAC,MAAQ,sCAAkB,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,+EAA+E,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,sCAAkB,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,0EAA0E,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,8BAAU,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,iEAAiE,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,kLAA2C,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,+RAAyD,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,oIAAgC,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,QAAQ,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,SAAI,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,2BAAU,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,0BAA0B,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,6HAAmC,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,eAAK,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,SAAI,OAAS,EAAE,SAAW,CAAC,EAAE,CAAC,MAAQ,+3GAA0yG,OAAS,EAAE,SAAW,CAAC,EAAE"}