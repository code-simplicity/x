(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_@ant-design/x"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_@ant-design/x"]||[]).push([["c88ed723"],{c88ed723:function(n,e,t){"use strict";t.d(e,"__esModule",{value:!0}),t.d(e,"default",{enumerable:!0,get:function(){return l;}});var s=t("777fffbe"),o=t("dcc18016"),a=t("2ccdbe5e"),r=s._(t("d64cba85")),i=t("896e0d47"),l=function(){return(0,o.jsx)(a.DumiPage,{children:(0,o.jsx)(i.Suspense,{fallback:(0,o.jsx)(r.default,{}),children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.DumiDemo,{demo:{id:"docs-playground-ultramodern-demo-ultramodern"},previewerProps:{title:"ultramodern",compact:!0,iframe:"800",filename:"docs/playground/ultramodern.tsx",pkgDependencyList:{"tbox-nodejs-sdk":"^0.0.13",openai:"^5.20.0","@antv/gpt-vis":"^0.4.1","@codesandbox/sandpack-react":"^2.19.8","@emotion/react":"^11.13.5","@emotion/server":"^11.11.0","@happy-dom/jest-environment":"^18.0.1","@ianvs/prettier-plugin-sort-imports":"^4.3.1","@microflash/rehype-figure":"^2.1.1","@npmcli/run-script":"^9.0.1","@octokit/rest":"^21.0.2","@prettier/sync":"^0.6.1","@qixian.cs/github-contributors-list":"^2.0.2","@rc-component/father-plugin":"^2.0.4","@rc-component/np":"^1.0.3","@rc-component/trigger":"^2.2.3","@stackblitz/sdk":"^1.11.0","@testing-library/dom":"^10.4.0","@testing-library/jest-dom":"^6.5.0","@testing-library/react":"^16.0.1","@testing-library/user-event":"^14.5.2","@types/adm-zip":"^0.5.5","@types/ali-oss":"^6.16.11","@types/cli-progress":"^3.11.6","@types/fs-extra":"^11.0.4","@types/gtag.js":"^0.0.20","@types/http-server":"^0.12.4","@types/inquirer":"^9.0.7","@types/isomorphic-fetch":"^0.0.39","@types/jest":"^30.0.0","@types/jest-axe":"^3.5.9","@types/jest-environment-puppeteer":"^5.0.6","@types/jest-image-snapshot":"^6.4.0","@types/jquery":"^3.5.30","@types/jsdom":"^27.0.0","@types/lodash":"^4.17.7","@types/minimist":"^1.2.5","@types/node":"^24.0.3","@types/ora":"^3.2.0","@types/pixelmatch":"^5.2.6","@types/pngjs":"^6.0.5","@types/prismjs":"^1.26.4","@types/progress":"^2.0.7","@types/qs":"^6.9.16","@types/react":"^19.0.2","@types/react-copy-to-clipboard":"^5.0.7","@types/react-dom":"^19.0.2","@types/react-highlight-words":"^0.20.0","@types/react-resizable":"^3.0.8","@types/semver":"^7.5.8","@types/spinnies":"^0.5.3","@types/tar":"^6.1.13","@types/throttle-debounce":"^5.0.2","@types/warning":"^3.0.3","@umijs/fabric":"^4.0.1","adm-zip":"^0.5.16","ali-oss":"^6.21.0",antd:"^6.0.0","antd-style":"^4.0.0-alpha.1","antd-token-previewer":"^3.0.0",axios:"^1.7.7",browserslist:"^4.23.3","browserslist-to-esbuild":"^2.1.1",chalk:"^5.4.1",cheerio:"^1.0.0","cli-progress":"^3.12.0","copy-to-clipboard":"^3.3.3","cross-env":"^7.0.3","cross-fetch":"^4.0.0",crypto:"^1.0.1",dayjs:"^1.11.13",dumi:"~2.4.21","dumi-plugin-color-chunk":"^2.1.0","esbuild-loader":"^4.2.2","fast-glob":"^3.3.2","fetch-jsonp":"^1.3.0","fs-extra":"^11.2.0",glob:"^11.0.0","happy-dom":"^20.0.10",html2sketch:"^1.0.2","http-server":"^14.1.1","identity-obj-proxy":"^3.0.0",immer:"^10.1.1",inquirer:"^12.1.0","is-ci":"^4.1.0","isomorphic-fetch":"^3.0.0",jest:"^30.2.0","jest-axe":"^10.0.0","jest-canvas-mock":"^2.5.2","jest-environment-node":"^30.0.0","jest-image-snapshot":"^6.5.1","jest-puppeteer":"^11.0.0",jquery:"^3.7.1",jsdom:"^26.0.0","jsonml-to-react-element":"^1.1.11","jsonml.js":"^0.1.0",lodash:"^4.17.21","lottie-web":"^5.12.2","lunar-typescript":"^1.7.5","lz-string":"^1.5.0",minimist:"^1.2.8",mockdate:"^3.0.5","node-fetch":"^3.3.2","node-notifier":"^10.0.1",open:"^10.1.0",ora:"^8.1.0",pixelmatch:"^7.1.0",pngjs:"^7.0.0","prettier-plugin-jsdoc":"^1.3.0","pretty-format":"^30.0.0",prismjs:"^1.29.0",puppeteer:"^24.0.0",qs:"^6.13.0","rc-drawer":"^8.0.0","rc-footer":"^0.6.8","rc-resize-observer":"^1.4.0","rc-virtual-list":"^3.14.5",react:"^19.0.0","react-copy-to-clipboard":"^5.1.0","react-dom":"^19.0.0","react-highlight-words":"^0.20.0","react-infinite-scroll-component":"^6.1.0","react-intersection-observer":"^10.0.0","react-intl":"^7.1.11","react-resizable":"^3.0.5","react-router-dom":"^7.0.1","react-sticky-box":"^2.0.5","regenerator-runtime":"^0.14.1","rehype-stringify":"^10.0.0",remark:"^15.0.1","remark-cli":"^12.0.1","remark-gfm":"^4.0.0","remark-lint":"^10.0.0","remark-lint-no-undefined-references":"^5.0.0","remark-preset-lint-recommended":"^7.0.0","remark-rehype":"^11.1.0","scroll-into-view-if-needed":"^3.1.0",semver:"^7.6.3",sharp:"^0.33.5","simple-git":"^3.26.0",spinnies:"^0.5.1",tar:"^7.4.3",tsx:"^4.19.1",typedoc:"^0.28.0",typescript:"~5.8.2","vanilla-jsoneditor":"^3.0.0","web-streams-polyfill":"^4.0.0",webpack:"^5.94.0","webpack-bundle-analyzer":"^5.0.1","@ant-design/colors":"^8.0.0","@ant-design/cssinjs":"^2.0.0","@ant-design/cssinjs-utils":"^2.0.0","@ant-design/fast-color":"^3.0.0","@ant-design/icons":"^6.0.0","@babel/runtime":"^7.25.6",classnames:"^2.5.1","rc-motion":"^2.9.2","rc-util":"^5.43.0"},pkgPeerDependencies:{antd:"^6.0.0",react:">=18.0.0","react-dom":">=18.0.0"},jsx:"var __awaiter =\n  (this && this.__awaiter) ||\n  function (thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P\n        ? value\n        : new P(function (resolve) {\n            resolve(value);\n          });\n    }\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator['throw'](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\nvar __rest =\n  (this && this.__rest) ||\n  function (s, e) {\n    var t = {};\n    for (var p in s)\n      if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n        if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n          t[p[i]] = s[p[i]];\n      }\n    return t;\n  };\nimport { DeleteOutlined, OpenAIOutlined, SyncOutlined } from '@ant-design/icons';\nimport { Actions, Bubble, Conversations, Sender, XProvider } from '@ant-design/x';\nimport XMarkdown from '@ant-design/x-markdown';\nimport { DeepSeekChatProvider, useXChat, useXConversations, XRequest } from '@ant-design/x-sdk';\nimport { Flex, message } from 'antd';\nimport { createStyles } from 'antd-style';\nimport classNames from 'classnames';\nimport dayjs from 'dayjs';\nimport React, { useEffect, useRef, useState } from 'react';\nimport '@ant-design/x-markdown/themes/light.css';\nimport '@ant-design/x-markdown/themes/dark.css';\nimport { useMarkdownTheme } from '../x-markdown/demo/_utils';\nimport locale from './_utils/local';\nconst useStyle = createStyles(({ token, css }) => {\n  return {\n    layout: css`\n      width: 100%;\n      height: 100vh;\n      display: flex;\n      background: ${token.colorBgContainer};\n      overflow: hidden;\n    `,\n    side: css`\n      background: ${token.colorBgLayout};\n      width: 280px;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      padding: 0 12px;\n      box-sizing: border-box;\n    `,\n    logo: css`\n      display: flex;\n      align-items: center;\n      justify-content: start;\n      padding: 0 24px;\n      box-sizing: border-box;\n      gap: 8px;\n      margin: 24px 0;\n\n      span {\n        font-weight: bold;\n        color: ${token.colorText};\n        font-size: 16px;\n      }\n    `,\n    conversations: css`\n      overflow-y: auto;\n      margin-top: 12px;\n      padding: 0;\n      flex: 1;\n      .ant-conversations-list {\n        padding-inline-start: 0;\n      }\n    `,\n    sideFooter: css`\n      border-top: 1px solid ${token.colorBorderSecondary};\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n    `,\n    chat: css`\n      height: 100%;\n      width: calc(100% - 240px);\n      overflow: auto;\n      box-sizing: border-box;\n      display: flex;\n      flex-direction: column;\n      padding-block: ${token.paddingLG}px;\n      padding-inline: ${token.paddingLG}px;\n      gap: 16px;\n      .ant-bubble-content-updating {\n        background-image: linear-gradient(90deg, #ff6b23 0%, #af3cb8 31%, #53b6ff 89%);\n        background-size: 100% 2px;\n        background-repeat: no-repeat;\n        background-position: bottom;\n      }\n    `,\n    startPage: css`\n      display: flex;\n      width: 100%;\n      max-width: 840px;\n      flex-direction: column;\n      align-items: center;\n      height: 100%;\n    `,\n    agentName: css`\n      margin-block-start: 25%;\n      font-size: 32px;\n      margin-block-end: 38px;\n      font-weight: 600;\n    `,\n    chatList: css`\n      display: flex;\n      align-items: center;\n      width: 100%;\n      height: 100%;\n      flex-direction: column;\n      justify-content: space-between;\n    `,\n  };\n});\n// ==================== Context ====================\nconst ChatContext = React.createContext({});\nconst DEFAULT_CONVERSATIONS_ITEMS = [\n  {\n    key: 'default-0',\n    label: locale.whatIsAntDesignX,\n    group: locale.today,\n  },\n  {\n    key: 'default-1',\n    label: locale.howToQuicklyInstallAndImportComponents,\n    group: locale.today,\n  },\n  {\n    key: 'default-2',\n    label: locale.newAgiHybridInterface,\n    group: locale.yesterday,\n  },\n];\nconst HISTORY_MESSAGES = {\n  'default-1': [\n    {\n      message: { role: 'user', content: locale.howToQuicklyInstallAndImportComponents },\n      status: 'success',\n    },\n    {\n      message: {\n        role: 'assistant',\n        content: locale.aiMessage_2,\n      },\n      status: 'success',\n    },\n  ],\n  'default-2': [\n    { message: { role: 'user', content: locale.newAgiHybridInterface }, status: 'success' },\n    {\n      message: {\n        role: 'assistant',\n        content: locale.aiMessage_1,\n      },\n      status: 'success',\n    },\n  ],\n};\nconst slotConfig = [\n  { type: 'text', value: locale.slotTextStart },\n  {\n    type: 'select',\n    key: 'destination',\n    props: {\n      defaultValue: 'X SDK',\n      options: ['X SDK', 'X Markdown', 'Bubble'],\n    },\n  },\n  { type: 'text', value: locale.slotTextEnd },\n];\nconst historyMessageFactory = conversationKey => {\n  return HISTORY_MESSAGES[conversationKey] || [];\n};\nconst providerCaches = new Map();\nconst providerFactory = conversationKey => {\n  if (!providerCaches.get(conversationKey)) {\n    providerCaches.set(\n      conversationKey,\n      new DeepSeekChatProvider({\n        request: XRequest('https://api.x.ant.design/api/big_model_glm-4.5-flash', {\n          manual: true,\n          params: {\n            stream: true,\n            model: 'glm-4.5-flash',\n          },\n        }),\n      }),\n    );\n  }\n  return providerCaches.get(conversationKey);\n};\nconst Footer = ({ id, content, status }) => {\n  const context = React.useContext(ChatContext);\n  const Items = [\n    {\n      key: 'retry',\n      label: locale.retry,\n      icon: <SyncOutlined />,\n      onItemClick: () => {\n        var _a;\n        if (id) {\n          (_a = context === null || context === void 0 ? void 0 : context.onReload) === null ||\n          _a === void 0\n            ? void 0\n            : _a.call(context, id, {\n                userAction: 'retry',\n              });\n        }\n      },\n    },\n    {\n      key: 'copy',\n      actionRender: <Actions.Copy text={content} />,\n    },\n  ];\n  return status !== 'updating' && status !== 'loading' ? (\n    <div style={{ display: 'flex' }}>{id && <Actions items={Items} />}</div>\n  ) : null;\n};\nconst getRole = className => ({\n  assistant: {\n    placement: 'start',\n    footer: (content, { status, key }) => <Footer content={content} status={status} id={key} />,\n    contentRender: (content, { status }) => {\n      const newContent = content.replace('/\\n\\n/g', '<br/><br/>');\n      return (\n        <XMarkdown\n          paragraphTag=\"div\"\n          className={className}\n          streaming={{\n            hasNextChunk: status === 'updating',\n            enableAnimation: true,\n          }}\n        >\n          {newContent}\n        </XMarkdown>\n      );\n    },\n  },\n  user: { placement: 'end' },\n});\nconst App = () => {\n  const [className] = useMarkdownTheme();\n  const senderRef = useRef(null);\n  const { conversations, addConversation, setConversations } = useXConversations({\n    defaultConversations: DEFAULT_CONVERSATIONS_ITEMS,\n  });\n  const [curConversation, setCurConversation] = useState(DEFAULT_CONVERSATIONS_ITEMS[0].key);\n  const [activeConversation, setActiveConversation] = useState();\n  // ==================== Runtime ====================\n  const { onRequest, messages, isRequesting, abort, onReload } = useXChat({\n    provider: providerFactory(curConversation), // every conversation has its own provider\n    conversationKey: curConversation,\n    defaultMessages: historyMessageFactory(curConversation),\n    requestPlaceholder: () => {\n      return {\n        content: locale.noData,\n        role: 'assistant',\n      };\n    },\n    requestFallback: (_, { messageInfo }) => {\n      return Object.assign(\n        Object.assign(\n          {},\n          messageInfo === null || messageInfo === void 0 ? void 0 : messageInfo.message,\n        ),\n        {\n          content:\n            (messageInfo === null || messageInfo === void 0\n              ? void 0\n              : messageInfo.message.content) || locale.requestFailedPleaseTryAgain,\n        },\n      );\n    },\n  });\n  const { styles } = useStyle();\n  const [messageApi, contextHolder] = message.useMessage();\n  const [deepThink, setDeepThink] = useState(true);\n  useEffect(() => {\n    senderRef.current.focus({\n      cursor: 'end',\n    });\n  }, [senderRef.current]);\n  return (\n    <XProvider locale={locale}>\n      {contextHolder}\n      <ChatContext.Provider value={{ onReload }}>\n        <div className={styles.layout}>\n          <div className={styles.side}>\n            <div className={styles.logo}>\n              <img\n                src=\"https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*eco6RrQhxbMAAAAAAAAAAAAADgCCAQ/original\"\n                draggable={false}\n                alt=\"logo\"\n                width={24}\n                height={24}\n              />\n              <span>Ant Design X</span>\n            </div>\n            <Conversations\n              creation={{\n                onClick: () => {\n                  if (messages.length === 0) {\n                    messageApi.error(locale.itIsNowANewConversation);\n                    return;\n                  }\n                  const now = dayjs().valueOf().toString();\n                  addConversation({\n                    key: now,\n                    label: `${locale.newConversation} ${conversations.length + 1}`,\n                    group: locale.today,\n                  });\n                  setCurConversation(now);\n                },\n              }}\n              items={conversations\n                .map(_a => {\n                  var { key, label } = _a,\n                    other = __rest(_a, ['key', 'label']);\n                  return Object.assign(\n                    {\n                      key,\n                      label:\n                        key === activeConversation ? `[${locale.curConversation}]${label}` : label,\n                    },\n                    other,\n                  );\n                })\n                .sort(({ key }) => (key === activeConversation ? -1 : 0))}\n              className={styles.conversations}\n              activeKey={curConversation}\n              onActiveChange={val =>\n                __awaiter(void 0, void 0, void 0, function* () {\n                  setCurConversation(val);\n                })\n              }\n              groupable\n              styles={{ item: { padding: '0 8px' } }}\n              menu={conversation => ({\n                items: [\n                  {\n                    label: locale.delete,\n                    key: 'delete',\n                    icon: <DeleteOutlined />,\n                    danger: true,\n                    onClick: () => {\n                      var _a;\n                      const newList = conversations.filter(item => item.key !== conversation.key);\n                      const newKey =\n                        (_a = newList === null || newList === void 0 ? void 0 : newList[0]) ===\n                          null || _a === void 0\n                          ? void 0\n                          : _a.key;\n                      setConversations(newList);\n                      if (conversation.key === curConversation) {\n                        setCurConversation(newKey);\n                      }\n                    },\n                  },\n                ],\n              })}\n            />\n          </div>\n          <div className={styles.chat}>\n            <div className={styles.chatList}>\n              {(messages === null || messages === void 0 ? void 0 : messages.length) !== 0 && (\n                /* \u{1F31F} \u6D88\u606F\u5217\u8868 */\n                <Bubble.List\n                  style={{\n                    height: 'calc(100% - 160px)',\n                  }}\n                  items={\n                    messages === null || messages === void 0\n                      ? void 0\n                      : messages.map(i =>\n                          Object.assign(Object.assign({}, i.message), {\n                            key: i.id,\n                            status: i.status,\n                            loading: i.status === 'loading',\n                            extraInfo: i.message.extraInfo,\n                          }),\n                        )\n                  }\n                  styles={{\n                    root: {\n                      marginBlockEnd: 24,\n                    },\n                    bubble: { maxWidth: 840 },\n                  }}\n                  role={getRole(className)}\n                />\n              )}\n              <div\n                style={{ width: '100%', maxWidth: 840 }}\n                className={classNames({ [styles.startPage]: messages.length === 0 })}\n              >\n                {messages.length === 0 && (\n                  <div className={styles.agentName}>{locale.agentName}</div>\n                )}\n                <Sender\n                  suffix={false}\n                  ref={senderRef}\n                  key={curConversation}\n                  slotConfig={slotConfig}\n                  loading={isRequesting}\n                  onSubmit={val => {\n                    var _a, _b;\n                    if (!val) return;\n                    onRequest({\n                      messages: [{ role: 'user', content: val }],\n                      thinking: {\n                        type: 'disabled',\n                      },\n                    });\n                    setActiveConversation(curConversation);\n                    (_b =\n                      (_a = senderRef.current) === null || _a === void 0 ? void 0 : _a.clear) ===\n                      null || _b === void 0\n                      ? void 0\n                      : _b.call(_a);\n                  }}\n                  onCancel={() => {\n                    abort();\n                  }}\n                  placeholder={locale.placeholder}\n                  footer={actionNode => {\n                    return (\n                      <Flex justify=\"space-between\" align=\"center\">\n                        <Flex gap=\"small\" align=\"center\">\n                          <Sender.Switch\n                            value={deepThink}\n                            onChange={checked => {\n                              setDeepThink(checked);\n                            }}\n                            icon={<OpenAIOutlined />}\n                          >\n                            {locale.deepThink}\n                          </Sender.Switch>\n                        </Flex>\n                        <Flex align=\"center\">{actionNode}</Flex>\n                      </Flex>\n                    );\n                  }}\n                  autoSize={{ minRows: 3, maxRows: 6 }}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </ChatContext.Provider>\n    </XProvider>\n  );\n};\nexport default App;\n"}})})})});};},ff750582:function(n,e,t){"use strict";t.d(e,"__esModule",{value:!0}),t.d(e,"texts",{enumerable:!0,get:function(){return s;}}),t("01a63083");let s=[];}}]);
//# sourceMappingURL=c88ed723-async.4c835a20.js.map