{"version":3,"sources":[".dumi/theme/slots/Alert/index.tsx",".dumi/theme/layouts/GlobalLayout.tsx",".dumi/theme/SiteThemeProvider.tsx",".dumi/hooks/useDark.tsx"],"sourcesContent":["import { CloseOutlined } from '@ant-design/icons';\nimport { Alert, Button, Space } from 'antd';\nimport { createStyles } from 'antd-style';\nimport React from 'react';\nimport useLocale from '../../../hooks/useLocale';\n\nconst useStyle = createStyles(({ token, css }) => {\n  return {\n    alert: css`\n        height: ${token.alertHeight}px;\n        width: 100%;\n        position: fixed;\n        top: 0px;\n        z-index: 1000;\n        border: none;\n        border-radius: 0;\n        background: linear-gradient(90deg, #fe8aff 0%, rgb(111, 179, 226) 66%, rgb(108, 87, 255) 100%);\n        .ant-btn-color-link.ant-btn-variant-link{\n            padding: 0;\n        }\n    `,\n    message: css`\n      color: #000;\n      text-align: center;\n    `,\n  };\n});\n\nconst locales = {\n  cn: {\n    content: '参与 WeaveFox「AI艺术家」大赛，赢 SEE Conf 门票与千元好礼',\n    link: '立即前往',\n  },\n  en: {\n    content:\n      'Participate in the WeaveFox \"AI Artist\" contest to win SEE Conf tickets and thousands of prizes',\n    link: 'Go to',\n  },\n};\n\nconst Index: React.FC<{ onClose: () => void }> = ({ onClose }) => {\n  const { styles } = useStyle();\n  const [locale] = useLocale(locales);\n\n  return (\n    <Alert\n      classNames={{\n        root: styles.alert,\n        title: styles.message,\n      }}\n      closable={{\n        closeIcon: <CloseOutlined />,\n        onClose,\n      }}\n      title={\n        <Space>\n          {locale.content}\n          <Button\n            type=\"link\"\n            onClick={() => {\n              window.open('https://weavefox.cn/?ref=seeconf2025&source=antdx', '_blank');\n            }}\n          >\n            {locale.link}\n          </Button>\n        </Space>\n      }\n    />\n  );\n};\n\nexport default Index;\n","import {\n  createCache,\n  extractStyle,\n  legacyNotSelectorLinter,\n  NaNLinter,\n  parentSelectorLinter,\n  StyleProvider,\n} from '@ant-design/cssinjs';\nimport { getSandpackCssText } from '@codesandbox/sandpack-react';\nimport type { MappingAlgorithm } from 'antd';\nimport { App, theme as antdTheme } from 'antd';\nimport type { DirectionType, ThemeConfig } from 'antd/es/config-provider';\nimport { createSearchParams, useOutlet, useSearchParams, useServerInsertedHTML } from 'dumi';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { DarkContext } from '../../hooks/useDark';\nimport useLayoutState from '../../hooks/useLayoutState';\nimport useLocation from '../../hooks/useLocation';\nimport type { ThemeName } from '../common/ThemeSwitch';\nimport SiteThemeProvider from '../SiteThemeProvider';\nimport Alert from '../slots/Alert';\nimport type { SiteContextProps } from '../slots/SiteContext';\nimport SiteContext from '../slots/SiteContext';\n\ntype Entries<T> = { [K in keyof T]: [K, T[K]] }[keyof T][];\ntype SiteState = Partial<Omit<SiteContextProps, 'updateSiteContext'>>;\n\nconst RESPONSIVE_MOBILE = 870;\nexport const ANT_DESIGN_NOT_SHOW_BANNER = 'ANT_DESIGN_NOT_SHOW_BANNER';\n\nconst getAlgorithm = (themes: ThemeName[] = []) =>\n  themes\n    .map((theme) => {\n      if (theme === 'dark') {\n        return antdTheme.darkAlgorithm;\n      }\n      if (theme === 'compact') {\n        return antdTheme.compactAlgorithm;\n      }\n      return null as unknown as MappingAlgorithm;\n    })\n    .filter(Boolean);\n\nconst GlobalLayout: React.FC = () => {\n  const outlet = useOutlet();\n  const { pathname } = useLocation();\n  const { token } = antdTheme.useToken();\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [{ theme = [], direction, isMobile, bannerVisible = false }, setSiteState] =\n    useLayoutState<SiteState>({\n      isMobile: false,\n      direction: 'ltr',\n      theme: [],\n      bannerVisible: false,\n    });\n  const isIndexPage = React.useMemo(\n    () => pathname === '' || pathname.startsWith('/index'),\n    [pathname],\n  );\n\n  const updateSiteConfig = useCallback(\n    (props: SiteState) => {\n      setSiteState((prev) => ({ ...prev, ...props }));\n\n      const oldSearchStr = searchParams.toString();\n\n      let nextSearchParams: URLSearchParams = searchParams;\n      (Object.entries(props) as Entries<SiteContextProps>).forEach(([key, value]) => {\n        if (key === 'direction') {\n          if (value === 'rtl') {\n            nextSearchParams.set('direction', 'rtl');\n          } else {\n            nextSearchParams.delete('direction');\n          }\n        }\n        if (key === 'theme') {\n          nextSearchParams = createSearchParams({\n            ...nextSearchParams,\n            theme: value.filter((t) => t !== 'light'),\n          });\n\n          document\n            .querySelector('html')\n            ?.setAttribute('data-prefers-color', value.includes('dark') ? 'dark' : 'light');\n        }\n      });\n\n      if (nextSearchParams.toString() !== oldSearchStr) {\n        setSearchParams(nextSearchParams);\n      }\n    },\n    [searchParams, setSearchParams],\n  );\n\n  const updateMobileMode = () => {\n    updateSiteConfig({ isMobile: window.innerWidth < RESPONSIVE_MOBILE });\n  };\n\n  useEffect(() => {\n    const metaThemeColor = document.querySelector('meta[name=\"theme-color\"]');\n\n    if (metaThemeColor) {\n      metaThemeColor.setAttribute('content', isIndexPage ? '#0c0e10cc' : token.colorBgContainer);\n    }\n  }, [theme.length, isIndexPage]);\n\n  const [alertVisible, setAlertVisible] = useState(!pathname?.includes?.('~demos'));\n\n  useEffect(() => {\n    const _theme = searchParams.getAll('theme') as ThemeName[];\n    const _direction = searchParams.get('direction') as DirectionType;\n\n    setSiteState({\n      theme: _theme,\n      direction: _direction === 'rtl' ? 'rtl' : 'ltr',\n    });\n    document.documentElement.setAttribute(\n      'data-prefers-color',\n      _theme.includes('dark') ? 'dark' : 'light',\n    );\n    // Handle isMobile\n    updateMobileMode();\n\n    window.addEventListener('resize', updateMobileMode);\n    return () => {\n      window.removeEventListener('resize', updateMobileMode);\n    };\n  }, []);\n\n  const siteContextValue = React.useMemo<SiteContextProps>(\n    () => ({\n      direction,\n      updateSiteConfig,\n      theme: theme!,\n      isMobile: isMobile!,\n      bannerVisible,\n      alertVisible,\n    }),\n    [isMobile, direction, updateSiteConfig, alertVisible, theme],\n  );\n\n  const themeConfig = React.useMemo<ThemeConfig>(\n    () => ({\n      // index page should always use dark theme\n      algorithm: isIndexPage ? getAlgorithm(['dark']) : getAlgorithm(theme),\n      token: { motion: !theme.includes('motion-off') },\n      hashed: false,\n    }),\n    [theme, pathname, isIndexPage],\n  );\n\n  const [styleCache] = React.useState(() => createCache());\n\n  useServerInsertedHTML(() => {\n    const styleText = extractStyle(styleCache, {\n      plain: true,\n      types: 'style',\n    });\n    // biome-ignore lint/security/noDangerouslySetInnerHtml: only used in .dumi\n    return <style data-type=\"antd-cssinjs\" dangerouslySetInnerHTML={{ __html: styleText }} />;\n  });\n\n  useServerInsertedHTML(() => {\n    const styleText = extractStyle(styleCache, {\n      plain: true,\n      types: ['cssVar', 'token'],\n    });\n    return (\n      <style\n        data-type=\"antd-css-var\"\n        data-rc-order=\"prepend\"\n        data-rc-priority=\"-9999\"\n        // biome-ignore lint/security/noDangerouslySetInnerHtml: only used in .dumi\n        dangerouslySetInnerHTML={{ __html: styleText }}\n      />\n    );\n  });\n\n  useServerInsertedHTML(() => (\n    <style\n      data-sandpack=\"true\"\n      id=\"sandpack\"\n      // biome-ignore lint/security/noDangerouslySetInnerHtml: only used in .dumi\n      dangerouslySetInnerHTML={{ __html: getSandpackCssText() }}\n    />\n  ));\n\n  return (\n    <DarkContext value={theme.includes('dark')}>\n      <StyleProvider\n        cache={styleCache}\n        linters={[legacyNotSelectorLinter, parentSelectorLinter, NaNLinter]}\n      >\n        <SiteContext value={siteContextValue}>\n          <SiteThemeProvider theme={themeConfig}>\n            {alertVisible && (\n              <Alert\n                onClose={() => {\n                  setAlertVisible(false);\n                }}\n              />\n            )}\n            <App>{outlet}</App>\n          </SiteThemeProvider>\n        </SiteContext>\n      </StyleProvider>\n    </DarkContext>\n  );\n};\n\nexport default GlobalLayout;\n","import { theme as antdTheme, ConfigProvider } from 'antd';\nimport type { ThemeConfig } from 'antd/es/config-provider';\nimport type { ThemeProviderProps } from 'antd-style';\nimport { ThemeProvider } from 'antd-style';\nimport React, { useContext } from 'react';\n\ninterface NewToken {\n  bannerHeight: number;\n  headerHeight: number;\n  alertHeight: number;\n  menuItemBorder: number;\n  mobileMaxWidth: number;\n  siteMarkdownCodeBg: string;\n  antCls: string;\n  iconCls: string;\n  marginFarXS: number;\n  marginFarSM: number;\n  marginFar: number;\n  codeFamily: string;\n  contentMarginTop: number;\n  anchorTop: number;\n  indexRadius: number;\n  pcMaxWidth: number;\n  pcContainerMargin: number;\n}\n\n// 通过给 antd-style 扩展 CustomToken 对象类型定义，可以为 useTheme 中增加相应的 token 对象\ndeclare module 'antd-style' {\n  export interface CustomToken extends NewToken {}\n}\nconst alertHeight = 40;\nconst headerHeight = 80;\nconst bannerHeight = 38;\nconst indexRadius = 24;\nconst pcMaxWidth = 1560;\n\nconst SiteThemeProvider: React.FC<ThemeProviderProps<any>> = ({ children, theme, ...rest }) => {\n  const { getPrefixCls, iconPrefixCls } = useContext(ConfigProvider.ConfigContext);\n  const rootPrefixCls = getPrefixCls();\n  const { token } = antdTheme.useToken();\n  React.useEffect(() => {\n    // 需要注意与 components/config-provider/demo/holderRender.tsx 配置冲突\n    ConfigProvider.config({ theme: theme as ThemeConfig });\n  }, [theme]);\n\n  return (\n    <ThemeProvider<NewToken>\n      {...rest}\n      theme={theme}\n      customToken={{\n        headerHeight,\n        alertHeight,\n        bannerHeight,\n        indexRadius,\n        pcMaxWidth,\n        pcContainerMargin: 100,\n        menuItemBorder: 2,\n        mobileMaxWidth: 767.99,\n        siteMarkdownCodeBg: token.colorFillTertiary,\n        antCls: `.${rootPrefixCls}`,\n        iconCls: `.${iconPrefixCls}`,\n        /** 56 */\n        marginFarXS: (token.marginXXL / 6) * 7,\n        /** 80 */\n        marginFarSM: (token.marginXXL / 3) * 5,\n        /** 96 */\n        marginFar: token.marginXXL * 2,\n        codeFamily: `'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace`,\n        contentMarginTop: 40,\n        anchorTop: headerHeight + token.margin,\n      }}\n    >\n      {children}\n    </ThemeProvider>\n  );\n};\n\nexport default SiteThemeProvider;\n","import React from 'react';\n\nexport const DarkContext = React.createContext(false);\n"],"names":[],"mappings":"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"}