(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_@ant-design/x"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_@ant-design/x"]||[]).push([["38d2cf77"],{"38d2cf77":function(n,e,t){"use strict";t.d(e,"__esModule",{value:!0}),t.d(e,"default",{enumerable:!0,get:function(){return l;}});var o=t("777fffbe"),s=t("dcc18016"),a=t("2ccdbe5e"),i=o._(t("d64cba85")),r=t("896e0d47"),l=function(){return(0,s.jsx)(a.DumiPage,{children:(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(i.default,{}),children:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(a.DumiDemo,{demo:{id:"docs-playground-agent-tbox-demo-agent-tbox"},previewerProps:{title:"Tbox X Agent",compact:!0,iframe:"800",filename:"docs/playground/agent-tbox.tsx",pkgDependencyList:{"tbox-nodejs-sdk":"^0.0.13",openai:"^5.20.0","@antv/gpt-vis":"^0.4.1","@codesandbox/sandpack-react":"^2.19.8","@emotion/react":"^11.13.5","@emotion/server":"^11.11.0","@happy-dom/jest-environment":"^18.0.1","@ianvs/prettier-plugin-sort-imports":"^4.3.1","@microflash/rehype-figure":"^2.1.1","@npmcli/run-script":"^9.0.1","@octokit/rest":"^21.0.2","@prettier/sync":"^0.6.1","@qixian.cs/github-contributors-list":"^2.0.2","@rc-component/father-plugin":"^2.0.4","@rc-component/np":"^1.0.3","@rc-component/trigger":"^2.2.3","@stackblitz/sdk":"^1.11.0","@testing-library/dom":"^10.4.0","@testing-library/jest-dom":"^6.5.0","@testing-library/react":"^16.0.1","@testing-library/user-event":"^14.5.2","@types/adm-zip":"^0.5.5","@types/ali-oss":"^6.16.11","@types/cli-progress":"^3.11.6","@types/fs-extra":"^11.0.4","@types/gtag.js":"^0.0.20","@types/http-server":"^0.12.4","@types/inquirer":"^9.0.7","@types/isomorphic-fetch":"^0.0.39","@types/jest":"^30.0.0","@types/jest-axe":"^3.5.9","@types/jest-environment-puppeteer":"^5.0.6","@types/jest-image-snapshot":"^6.4.0","@types/jquery":"^3.5.30","@types/jsdom":"^27.0.0","@types/lodash":"^4.17.7","@types/minimist":"^1.2.5","@types/node":"^24.0.3","@types/ora":"^3.2.0","@types/pixelmatch":"^5.2.6","@types/pngjs":"^6.0.5","@types/prismjs":"^1.26.4","@types/progress":"^2.0.7","@types/qs":"^6.9.16","@types/react":"^19.0.2","@types/react-copy-to-clipboard":"^5.0.7","@types/react-dom":"^19.0.2","@types/react-highlight-words":"^0.20.0","@types/react-resizable":"^3.0.8","@types/semver":"^7.5.8","@types/spinnies":"^0.5.3","@types/tar":"^6.1.13","@types/throttle-debounce":"^5.0.2","@types/warning":"^3.0.3","@umijs/fabric":"^4.0.1","adm-zip":"^0.5.16","ali-oss":"^6.21.0",antd:"^6.0.0","antd-style":"^4.0.0-alpha.1","antd-token-previewer":"^3.0.0",axios:"^1.7.7",browserslist:"^4.23.3","browserslist-to-esbuild":"^2.1.1",chalk:"^5.4.1",cheerio:"^1.0.0","cli-progress":"^3.12.0","copy-to-clipboard":"^3.3.3","cross-env":"^7.0.3","cross-fetch":"^4.0.0",crypto:"^1.0.1",dayjs:"^1.11.13",dumi:"~2.4.21","dumi-plugin-color-chunk":"^2.1.0","esbuild-loader":"^4.2.2","fast-glob":"^3.3.2","fetch-jsonp":"^1.3.0","fs-extra":"^11.2.0",glob:"^11.0.0","happy-dom":"^20.0.10",html2sketch:"^1.0.2","http-server":"^14.1.1","identity-obj-proxy":"^3.0.0",immer:"^10.1.1",inquirer:"^12.1.0","is-ci":"^4.1.0","isomorphic-fetch":"^3.0.0",jest:"^30.2.0","jest-axe":"^10.0.0","jest-canvas-mock":"^2.5.2","jest-environment-node":"^30.0.0","jest-image-snapshot":"^6.5.1","jest-puppeteer":"^11.0.0",jquery:"^3.7.1",jsdom:"^26.0.0","jsonml-to-react-element":"^1.1.11","jsonml.js":"^0.1.0",lodash:"^4.17.21","lottie-web":"^5.12.2","lunar-typescript":"^1.7.5","lz-string":"^1.5.0",minimist:"^1.2.8",mockdate:"^3.0.5","node-fetch":"^3.3.2","node-notifier":"^10.0.1",open:"^10.1.0",ora:"^8.1.0",pixelmatch:"^7.1.0",pngjs:"^7.0.0","prettier-plugin-jsdoc":"^1.3.0","pretty-format":"^30.0.0",prismjs:"^1.29.0",puppeteer:"^24.0.0",qs:"^6.13.0","rc-drawer":"^8.0.0","rc-footer":"^0.6.8","rc-resize-observer":"^1.4.0","rc-virtual-list":"^3.14.5",react:"^19.0.0","react-copy-to-clipboard":"^5.1.0","react-dom":"^19.0.0","react-highlight-words":"^0.20.0","react-infinite-scroll-component":"^6.1.0","react-intersection-observer":"^10.0.0","react-intl":"^7.1.11","react-resizable":"^3.0.5","react-router-dom":"^7.0.1","react-sticky-box":"^2.0.5","regenerator-runtime":"^0.14.1","rehype-stringify":"^10.0.0",remark:"^15.0.1","remark-cli":"^12.0.1","remark-gfm":"^4.0.0","remark-lint":"^10.0.0","remark-lint-no-undefined-references":"^5.0.0","remark-preset-lint-recommended":"^7.0.0","remark-rehype":"^11.1.0","scroll-into-view-if-needed":"^3.1.0",semver:"^7.6.3",sharp:"^0.33.5","simple-git":"^3.26.0",spinnies:"^0.5.1",tar:"^7.4.3",tsx:"^4.19.1",typedoc:"^0.28.0",typescript:"~5.8.2","vanilla-jsoneditor":"^3.0.0","web-streams-polyfill":"^4.0.0",webpack:"^5.94.0","webpack-bundle-analyzer":"^5.0.1","@ant-design/colors":"^8.0.0","@ant-design/cssinjs":"^2.0.0","@ant-design/cssinjs-utils":"^2.0.0","@ant-design/fast-color":"^3.0.0","@ant-design/icons":"^6.0.0","@babel/runtime":"^7.25.6",classnames:"^2.5.1","rc-motion":"^2.9.2","rc-util":"^5.43.0"},pkgPeerDependencies:{antd:"^6.0.0",react:">=18.0.0","react-dom":">=18.0.0"},jsx:"var _a, _b, _c;\nimport {\n  AppstoreAddOutlined,\n  DeleteOutlined,\n  EditOutlined,\n  EllipsisOutlined,\n  FileSearchOutlined,\n  GlobalOutlined,\n  HeartOutlined,\n  ProductOutlined,\n  QuestionCircleOutlined,\n  ScheduleOutlined,\n  ShareAltOutlined,\n  SmileOutlined,\n  SyncOutlined,\n} from '@ant-design/icons';\nimport {\n  Actions,\n  Bubble,\n  Conversations,\n  Prompts,\n  Sender,\n  Think,\n  ThoughtChain,\n  Welcome,\n  XProvider,\n} from '@ant-design/x';\nimport enUS_X from '@ant-design/x/locale/en_US';\nimport zhCN_X from '@ant-design/x/locale/zh_CN';\nimport XMarkdown from '@ant-design/x-markdown';\nimport {\n  AbstractChatProvider,\n  AbstractXRequestClass,\n  useXChat,\n  useXConversations,\n} from '@ant-design/x-sdk';\nimport { Avatar, Button, Flex, message, Pagination, Space } from 'antd';\nimport enUS_antd from 'antd/locale/en_US';\nimport zhCN_antd from 'antd/locale/zh_CN';\nimport { createStyles } from 'antd-style';\nimport dayjs from 'dayjs';\nimport React, { useState } from 'react';\nimport { TboxClient } from 'tbox-nodejs-sdk';\nimport { useMarkdownTheme } from '../x-markdown/demo/_utils';\n// ==================== Local ====================\nconst zhCN = {\n  whatIsTbox: '\u4EC0\u4E48\u662F\u767E\u5B9D\u7BB1 Tbox.cn?',\n  whatCanTboxDo: '\u767E\u5B9D\u7BB1\u53EF\u4EE5\u505A\u4EC0\u4E48?',\n  today: '\u4ECA\u5929',\n  yesterday: '\u6628\u5929',\n  hotTopics: '\u6700\u70ED\u8BDD\u9898',\n  designGuide: '\u8BBE\u8BA1\u6307\u5357',\n  intent: '\u610F\u56FE',\n  role: '\u89D2\u8272',\n  aiUnderstandsUserNeeds: 'AI \u7406\u89E3\u7528\u6237\u9700\u6C42\u5E76\u63D0\u4F9B\u89E3\u51B3\u65B9\u6848',\n  aiPublicImage: 'AI \u7684\u516C\u4F17\u5F62\u8C61',\n  dynamic: '\u52A8\u6001',\n  component: '\u7EC4\u4EF6',\n  guide: '\u6307\u5357',\n  tutorial: '\u6559\u7A0B',\n  newConversation: '\u65B0\u4F1A\u8BDD',\n  rename: '\u91CD\u547D\u540D',\n  delete: '\u5220\u9664',\n  requestInProgress: '\u8BF7\u6C42\u6B63\u5728\u8FDB\u884C\u4E2D\uFF0C\u8BF7\u7B49\u5F85\u8BF7\u6C42\u5B8C\u6210\u3002',\n  demoButtonNoFunction: '\u6F14\u793A\u6309\u94AE\uFF0C\u65E0\u5B9E\u9645\u529F\u80FD',\n  helloAntdXTboxAgent: '\u4F60\u597D\uFF0C \u6211\u662F Ant Design X & \u767E\u5B9D\u7BB1\u667A\u80FD\u4F53',\n  antdXTboxDescription:\n    '\u57FA\u4E8E Ant Design \u7684 AGI \u4EA7\u54C1\u754C\u9762\u89E3\u51B3\u65B9\u6848\uFF0C\u6253\u9020\u66F4\u5353\u8D8A\u7684\u667A\u80FD\u89C6\u89C9\u4F53\u9A8C\uFF0C\u96C6\u6210\u4E86\u767E\u5B9D\u7BB1 Tbox.cn \u7684\u667A\u80FD\u4F53\u80FD\u529B\uFF0C\u52A9\u529B\u4EA7\u54C1\u8BBE\u8BA1\u4E0E\u5F00\u53D1\u3002',\n  askMeAnything: '\u5411\u6211\u63D0\u95EE\u5427',\n  DeepThinking: '\u6DF1\u5EA6\u601D\u8003\u4E2D',\n  CompleteThinking: '\u6DF1\u5EA6\u601D\u8003\u5B8C\u6210',\n  noData: '\u6682\u65E0\u6570\u636E',\n  modelIsRunning: '\u6B63\u5728\u8C03\u7528\u6A21\u578B',\n  modelExecutionCompleted: '\u5927\u6A21\u578B\u6267\u884C\u5B8C\u6210',\n  executionFailed: '\u6267\u884C\u5931\u8D25',\n  aborted: '\u5DF2\u7ECF\u7EC8\u6B62',\n  curConversation: '\u5F53\u524D\u5BF9\u8BDD',\n  nowNenConversation: '\u5F53\u524D\u5DF2\u7ECF\u662F\u65B0\u4F1A\u8BDD',\n  isMock: '\u5F53\u524D\u4E3A\u6A21\u62DF\u529F\u80FD',\n  retry: '\u91CD\u65B0\u751F\u6210',\n};\nconst enUS = {\n  whatIsTbox: 'What is Tbox.cn?',\n  whatCanTboxDo: 'What can Tbox.cn do?',\n  today: 'Today',\n  yesterday: 'Yesterday',\n  hotTopics: 'Hot Topics',\n  designGuide: 'Design Guide',\n  intent: 'Intent',\n  role: 'Role',\n  aiUnderstandsUserNeeds: 'AI understands user needs and provides solutions',\n  aiPublicImage: \"AI's public image\",\n  dynamic: 'Dynamic',\n  component: 'Component',\n  guide: 'Guide',\n  tutorial: 'Tutorial',\n  newConversation: 'New Conversation',\n  rename: 'Rename',\n  delete: 'Delete',\n  requestInProgress: 'Request is in progress, please wait for the request to complete.',\n  demoButtonNoFunction: 'Demo button, no actual function',\n  helloAntdXTboxAgent: 'Hello, I am Ant Design X & Tbox Agent',\n  antdXTboxDescription:\n    'An AGI product interface solution based on Ant Design, creating a superior intelligent visual experience, integrating the capabilities of Tbox.cn agents to assist in product design and development.',\n  askMeAnything: 'Ask me anything...',\n  DeepThinking: 'Deep thinking',\n  CompleteThinking: 'Deep thinking completed',\n  noData: 'No Data',\n  modelIsRunning: 'Model is running',\n  modelExecutionCompleted: 'Model execution completed',\n  executionFailed: 'Execution failed',\n  aborted: 'Aborted',\n  curConversation: 'Current Conversation',\n  nowNenConversation: 'It is now a new conversation.',\n  retry: 'retry',\n  isMock: 'It is Mock',\n};\nconst isZhCN =\n  (_c =\n    (_b = (_a = window.parent) === null || _a === void 0 ? void 0 : _a.location) === null ||\n    _b === void 0\n      ? void 0\n      : _b.pathname) === null || _c === void 0\n    ? void 0\n    : _c.includes('-cn');\nconst t = isZhCN ? zhCN : enUS;\n// ==================== Static Config ====================\nconst DEFAULT_CONVERSATIONS_ITEMS = [\n  {\n    key: 'default-0',\n    label: t.whatIsTbox,\n    group: t.today,\n  },\n  {\n    key: 'default-1',\n    label: t.whatCanTboxDo,\n    group: t.yesterday,\n  },\n];\nconst HOT_TOPICS = {\n  key: '1',\n  label: t.hotTopics,\n  children: [\n    {\n      key: '1-1',\n      description: t.whatIsTbox,\n      icon: <span style={{ color: '#f93a4a', fontWeight: 700 }}>1</span>,\n    },\n    {\n      key: '1-2',\n      description: t.whatCanTboxDo,\n      icon: <span style={{ color: '#ff6565', fontWeight: 700 }}>2</span>,\n    },\n  ],\n};\nconst DESIGN_GUIDE = {\n  key: '2',\n  label: t.designGuide,\n  children: [\n    {\n      key: '2-1',\n      icon: <HeartOutlined />,\n      label: t.intent,\n      description: t.aiUnderstandsUserNeeds,\n    },\n    {\n      key: '2-2',\n      icon: <SmileOutlined />,\n      label: t.role,\n      description: t.aiPublicImage,\n    },\n  ],\n};\nconst SENDER_PROMPTS = [\n  {\n    key: '1',\n    description: t.dynamic,\n    icon: <ScheduleOutlined />,\n  },\n  {\n    key: '2',\n    description: t.component,\n    icon: <ProductOutlined />,\n  },\n  {\n    key: '3',\n    description: t.guide,\n    icon: <FileSearchOutlined />,\n  },\n  {\n    key: '4',\n    description: t.tutorial,\n    icon: <AppstoreAddOutlined />,\n  },\n];\n// ==================== Style ====================\nconst useStyle = createStyles(({ token, css }) => {\n  return {\n    layout: css`\n      width: 100%;\n      height: 100vh;\n      display: flex;\n      background: ${token.colorBgContainer};\n      font-family: AlibabaPuHuiTi, ${token.fontFamily}, sans-serif;\n    `,\n    // sider \u6837\u5F0F\n    sider: css`\n      background: ${token.colorBgLayout}80;\n      width: 280px;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      padding: 0 12px;\n      box-sizing: border-box;\n    `,\n    logo: css`\n      display: flex;\n      align-items: center;\n      justify-content: start;\n      padding: 0 24px;\n      box-sizing: border-box;\n      gap: 8px;\n      margin: 24px 0;\n\n      span {\n        font-weight: bold;\n        color: ${token.colorText};\n        font-size: 16px;\n      }\n    `,\n    conversations: css`\n      flex: 1;\n      overflow-y: auto;\n      margin-top: 12px;\n      padding: 0;\n\n      .ant-conversations-list {\n        padding-inline-start: 0;\n      }\n    `,\n    sideFooter: css`\n      border-top: 1px solid ${token.colorBorderSecondary};\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n    `,\n    typing: css`\n      position: absolute;\n      right: 20px;\n      bottom: 10px;\n    `,\n    // chat list \u6837\u5F0F\n    chat: css`\n      height: 100%;\n      width: calc(100% - 280px);\n      box-sizing: border-box;\n      display: flex;\n      flex-direction: column;\n      padding-block: ${token.paddingLG}px;\n      justify-content: space-between;\n      .ant-bubble-content-updating {\n        background-image: linear-gradient(90deg, #ff6b23 0%, #af3cb8 31%, #53b6ff 89%);\n        background-size: 100% 2px;\n        background-repeat: no-repeat;\n        background-position: bottom;\n      }\n    `,\n    chatPrompt: css`\n      .ant-prompts-label {\n        color: #000000e0 !important;\n      }\n      .ant-prompts-desc {\n        color: #000000a6 !important;\n        width: 100%;\n      }\n      .ant-prompts-icon {\n        color: #000000a6 !important;\n      }\n    `,\n    chatList: css`\n      display: flex;\n      height: calc(100% - 120px);\n      flex-direction: column;\n      align-items: center;\n      width: 100%;\n    `,\n    placeholder: css`\n      padding-top: 32px;\n      width: 100%;\n      padding-inline: ${token.paddingLG}px;\n      box-sizing: border-box;\n    `,\n    // sender \u6837\u5F0F\n    sender: css`\n      width: 100%;\n      max-width: 840px;\n      margin: 0 auto;\n    `,\n    speechButton: css`\n      font-size: 18px;\n      color: ${token.colorText} !important;\n    `,\n    senderPrompt: css`\n      width: 100%;\n      max-width: 840px;\n      margin: 0 auto;\n      color: ${token.colorText};\n    `,\n  };\n});\nconst tboxClient = new TboxClient({\n  httpClientConfig: {\n    authorization: 'your-api-key', // Replace with your API key\n    isAntdXDemo: true, // Only for Ant Design X demo\n  },\n});\nclass TboxRequest extends AbstractXRequestClass {\n  constructor(baseURL, options) {\n    super(baseURL, options);\n    this._isTimeout = false;\n    this._isStreamTimeout = false;\n    this._isRequesting = false;\n    this.tboxClient = new TboxClient({\n      httpClientConfig: {\n        authorization: 'your-api-key', // Replace with your API key\n        isAntdXDemo: true, // Only for Ant Design X demo\n      },\n    });\n  }\n  get asyncHandler() {\n    return Promise.resolve();\n  }\n  get isTimeout() {\n    return this._isTimeout;\n  }\n  get isStreamTimeout() {\n    return this._isStreamTimeout;\n  }\n  get isRequesting() {\n    return this._isRequesting;\n  }\n  get manual() {\n    return true;\n  }\n  run(params) {\n    var _a;\n    const stream = tboxClient.chat({\n      appId: 'your-app-id', // Replace with your app ID\n      query:\n        (_a = params === null || params === void 0 ? void 0 : params.message) === null ||\n        _a === void 0\n          ? void 0\n          : _a.content,\n      version: 'v2', // only for antd-x v2\n      userId: 'antd-x',\n    });\n    this.tboxStream = stream;\n    const { callbacks } = this.options;\n    const dataArr = [];\n    stream.on('data', data => {\n      var _a, _b, _c, _d;\n      let parsedPayload;\n      try {\n        const payload = ((_a = data.data) === null || _a === void 0 ? void 0 : _a.payload) || '{}';\n        parsedPayload = JSON.parse(payload);\n      } catch (e) {\n        console.error('Failed to parse payload:', e);\n        return;\n      }\n      if (\n        (parsedPayload === null || parsedPayload === void 0 ? void 0 : parsedPayload.text) ||\n        ((_b =\n          parsedPayload === null || parsedPayload === void 0 ? void 0 : parsedPayload.ext_data) ===\n          null || _b === void 0\n          ? void 0\n          : _b.text)\n      ) {\n        const data = {\n          text: parsedPayload === null || parsedPayload === void 0 ? void 0 : parsedPayload.text,\n          ext_text:\n            (_c =\n              parsedPayload === null || parsedPayload === void 0\n                ? void 0\n                : parsedPayload.ext_data) === null || _c === void 0\n              ? void 0\n              : _c.text,\n        };\n        dataArr.push(data);\n        (_d = callbacks === null || callbacks === void 0 ? void 0 : callbacks.onUpdate) === null ||\n        _d === void 0\n          ? void 0\n          : _d.call(callbacks, data, new Headers());\n      }\n    });\n    stream.on('error', error => {\n      var _a;\n      if (\n        !((_a = error === null || error === void 0 ? void 0 : error.message) === null ||\n        _a === void 0\n          ? void 0\n          : _a.includes('abort'))\n      ) {\n        callbacks === null || callbacks === void 0 ? void 0 : callbacks.onError(error);\n      }\n    });\n    stream.on('end', () => {\n      callbacks === null || callbacks === void 0\n        ? void 0\n        : callbacks.onSuccess(dataArr, new Headers());\n    });\n    stream.on('abort', () => {\n      callbacks === null || callbacks === void 0\n        ? void 0\n        : callbacks.onError({ name: 'AbortError', message: '' });\n    });\n  }\n  abort() {\n    var _a, _b;\n    (_b = (_a = this.tboxStream) === null || _a === void 0 ? void 0 : _a.abort) === null ||\n    _b === void 0\n      ? void 0\n      : _b.call(_a);\n  }\n}\nclass TboxProvider extends AbstractChatProvider {\n  transformParams(requestParams, options) {\n    var _a;\n    if (typeof requestParams !== 'object') {\n      throw new Error('requestParams must be an object');\n    }\n    if (requestParams.userAction === 'retry') {\n      const messages = this.getMessages();\n      const queryMessage =\n        (_a = messages || []) === null || _a === void 0\n          ? void 0\n          : _a.reverse().find(({ role }) => {\n              return role === 'user';\n            });\n      return Object.assign(\n        Object.assign(\n          { message: queryMessage },\n          (options === null || options === void 0 ? void 0 : options.params) || {},\n        ),\n        requestParams || {},\n      );\n    }\n    return Object.assign(\n      Object.assign({}, (options === null || options === void 0 ? void 0 : options.params) || {}),\n      requestParams || {},\n    );\n  }\n  transformLocalMessage(requestParams) {\n    return requestParams.message;\n  }\n  transformMessage(info) {\n    const { originMessage, chunk } = info || {};\n    if (!chunk) {\n      return {\n        content:\n          (originMessage === null || originMessage === void 0 ? void 0 : originMessage.content) ||\n          {},\n        role: 'assistant',\n      };\n    }\n    const content =\n      (originMessage === null || originMessage === void 0 ? void 0 : originMessage.content) || {};\n    return {\n      content: {\n        text: (content.text || '') + (chunk.text || ''),\n        ext_text: (content.ext_text || '') + (chunk.ext_text || ''),\n      },\n      role: 'assistant',\n    };\n  }\n}\n/**\n * \u{1F514} Please replace the BASE_URL, MODEL with your own values.\n */\nconst providerCaches = new Map();\nconst providerFactory = conversationKey => {\n  if (!providerCaches.get(conversationKey)) {\n    providerCaches.set(\n      conversationKey,\n      new TboxProvider({\n        request: new TboxRequest('Tbox Client', {}),\n      }),\n    );\n  }\n  return providerCaches.get(conversationKey);\n};\n// ==================== Context ====================\nconst ChatContext = React.createContext({});\n// ==================== Sub Component====================\nconst ThinkComponent = React.memo(props => {\n  const [title, setTitle] = React.useState(`${t.DeepThinking}...`);\n  const [loading, setLoading] = React.useState(true);\n  React.useEffect(() => {\n    if (props.streamStatus === 'done') {\n      setTitle(t.CompleteThinking);\n      setLoading(false);\n    }\n  }, [props.streamStatus]);\n  return (\n    <Think title={title} loading={loading}>\n      {props.children}\n    </Think>\n  );\n});\nconst Footer = ({ id, content, status }) => {\n  const context = React.useContext(ChatContext);\n  const [mockFeedback, setMockFeedback] = useState('default');\n  const Items = [\n    {\n      key: 'pagination',\n      actionRender: <Pagination simple total={1} pageSize={1} />,\n    },\n    {\n      key: 'retry',\n      label: t.retry,\n      icon: <SyncOutlined />,\n      onItemClick: () => {\n        var _a;\n        if (id) {\n          (_a = context === null || context === void 0 ? void 0 : context.onReload) === null ||\n          _a === void 0\n            ? void 0\n            : _a.call(context, id, {\n                userAction: 'retry',\n              });\n        }\n      },\n    },\n    {\n      key: 'copy',\n      actionRender: <Actions.Copy text={content} />,\n    },\n    {\n      key: 'audio',\n      actionRender: (\n        <Actions.Audio\n          onClick={() => {\n            message.info(t.isMock);\n          }}\n        />\n      ),\n    },\n    {\n      key: 'feedback',\n      actionRender: (\n        <Actions.Feedback\n          styles={{\n            liked: {\n              color: '#f759ab',\n            },\n          }}\n          value={mockFeedback || 'default'}\n          key=\"feedback\"\n          onChange={val => {\n            setMockFeedback(val);\n            message.success(`${id}: ${val}`);\n          }}\n        />\n      ),\n    },\n  ];\n  return status !== 'updating' && status !== 'loading' ? (\n    <div style={{ display: 'flex' }}>{id && <Actions items={Items} />}</div>\n  ) : null;\n};\nconst AgentTbox = () => {\n  const { styles } = useStyle();\n  const [className] = useMarkdownTheme();\n  const locale = isZhCN\n    ? Object.assign(Object.assign({}, zhCN_antd), zhCN_X)\n    : Object.assign(Object.assign({}, enUS_antd), enUS_X);\n  // ==================== State ====================\n  const {\n    conversations,\n    activeConversationKey,\n    setActiveConversationKey,\n    addConversation,\n    setConversations,\n  } = useXConversations({\n    defaultConversations: DEFAULT_CONVERSATIONS_ITEMS,\n    defaultActiveConversationKey: DEFAULT_CONVERSATIONS_ITEMS[0].key,\n  });\n  const [messageApi, contextHolder] = message.useMessage();\n  const [inputValue, setInputValue] = useState('');\n  /**\n   * \u{1F514} Please replace the BASE_URL, PATH, MODEL, API_KEY with your own values.\n   */\n  // ==================== Runtime ====================\n  const { onRequest, messages, isRequesting, abort, onReload } = useXChat({\n    provider: providerFactory(activeConversationKey), // every conversation has its own provider\n    conversationKey: activeConversationKey,\n    requestPlaceholder: () => {\n      return {\n        content: { text: t.noData },\n        role: 'assistant',\n      };\n    },\n  });\n  // ==================== Event ====================\n  const onSubmit = val => {\n    if (!val) return;\n    onRequest({\n      message: { role: 'user', content: val },\n    });\n  };\n  // ==================== Nodes ====================\n  const chatSide = (\n    <div className={styles.sider}>\n      {/* \u{1F31F} Logo */}\n      <div className={styles.logo}>\n        <img\n          src=\"https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*eco6RrQhxbMAAAAAAAAAAAAADgCCAQ/original\"\n          draggable={false}\n          alt=\"logo\"\n          width={24}\n          height={24}\n        />\n        <span>Ant Design X</span>\n      </div>\n      {/* \u{1F31F} \u4F1A\u8BDD\u7BA1\u7406 */}\n      <Conversations\n        creation={{\n          onClick: () => {\n            if (messages.length === 0) {\n              messageApi.error(t.nowNenConversation);\n              return;\n            }\n            const now = dayjs().valueOf().toString();\n            addConversation({\n              key: now,\n              label: `${t.newConversation} ${conversations.length + 1}`,\n              group: t.today,\n            });\n            setActiveConversationKey(now);\n          },\n        }}\n        items={conversations.map(({ key, label }) => ({\n          key,\n          label: key === activeConversationKey ? `[${t.curConversation}]${label}` : label,\n        }))}\n        className={styles.conversations}\n        activeKey={activeConversationKey}\n        onActiveChange={setActiveConversationKey}\n        groupable\n        styles={{ item: { padding: '0 8px' } }}\n        menu={conversation => ({\n          items: [\n            {\n              label: t.rename,\n              key: 'rename',\n              icon: <EditOutlined />,\n            },\n            {\n              label: t.delete,\n              key: 'delete',\n              icon: <DeleteOutlined />,\n              danger: true,\n              onClick: () => {\n                var _a;\n                const newList = conversations.filter(item => item.key !== conversation.key);\n                const newKey =\n                  (_a = newList === null || newList === void 0 ? void 0 : newList[0]) === null ||\n                  _a === void 0\n                    ? void 0\n                    : _a.key;\n                setConversations(newList);\n                if (conversation.key === activeConversationKey) {\n                  setActiveConversationKey(newKey);\n                }\n              },\n            },\n          ],\n        })}\n      />\n\n      <div className={styles.sideFooter}>\n        <Avatar size={24} />\n        <Button type=\"text\" icon={<QuestionCircleOutlined />} />\n      </div>\n    </div>\n  );\n  const ThoughtChainConfig = {\n    loading: {\n      title: t.modelIsRunning,\n      status: 'loading',\n    },\n    updating: {\n      title: t.modelIsRunning,\n      status: 'loading',\n    },\n    success: {\n      title: t.modelExecutionCompleted,\n      status: 'success',\n    },\n    error: {\n      title: t.executionFailed,\n      status: 'error',\n    },\n    abort: {\n      title: t.aborted,\n      status: 'abort',\n    },\n  };\n  const role = {\n    assistant: {\n      placement: 'start',\n      header: (_, { status }) => {\n        const config = ThoughtChainConfig[status];\n        return config ? (\n          <ThoughtChain.Item\n            style={{\n              marginBottom: 8,\n            }}\n            status={config.status}\n            variant=\"solid\"\n            icon={<GlobalOutlined />}\n            title={config.title}\n          />\n        ) : null;\n      },\n      footer: (content, { status, key }) => <Footer content={content} status={status} id={key} />,\n      contentRender: (content, { status }) => {\n        const markdownText = `${content.ext_text ? `<think>\\n\\n${content.ext_text}${content.text ? '\\n\\n</think>\\n\\n' : ''}` : ''}${content.text || ''}`;\n        return (\n          <XMarkdown\n            content={markdownText}\n            className={className}\n            components={{\n              think: ThinkComponent,\n            }}\n            streaming={{ hasNextChunk: status === 'updating', enableAnimation: true }}\n          />\n        );\n      },\n    },\n    user: { placement: 'end' },\n  };\n  const chatList = (\n    <div className={styles.chatList}>\n      {(messages === null || messages === void 0 ? void 0 : messages.length) ? (\n        /* \u{1F31F} \u6D88\u606F\u5217\u8868 */\n        <Bubble.List\n          items={\n            messages === null || messages === void 0\n              ? void 0\n              : messages.map(i =>\n                  Object.assign(Object.assign({}, i.message), {\n                    status: i.status,\n                    loading: i.status === 'loading',\n                    key: i.id,\n                  }),\n                )\n          }\n          styles={{\n            bubble: {\n              maxWidth: 840,\n            },\n          }}\n          role={role}\n        />\n      ) : (\n        <Flex\n          vertical\n          style={{\n            maxWidth: 840,\n          }}\n          gap={16}\n          align=\"center\"\n          className={styles.placeholder}\n        >\n          <Welcome\n            variant=\"borderless\"\n            icon=\"https://mdn.alipayobjects.com/huamei_iwk9zp/afts/img/A*s5sNRo5LjfQAAAAAAAAAAAAADgCCAQ/fmt.webp\"\n            title={t.helloAntdXTboxAgent}\n            description={t.antdXTboxDescription}\n            extra={\n              <Space>\n                <Button icon={<ShareAltOutlined />} />\n                <Button icon={<EllipsisOutlined />} />\n              </Space>\n            }\n          />\n          <Flex gap={16}>\n            <Prompts\n              items={[HOT_TOPICS]}\n              styles={{\n                list: { height: '100%' },\n                item: {\n                  flex: 1,\n                  backgroundImage: 'linear-gradient(123deg, #e5f4ff 0%, #efe7ff 100%)',\n                  borderRadius: 12,\n                  border: 'none',\n                },\n                subItem: { padding: 0, background: 'transparent' },\n              }}\n              onItemClick={info => {\n                onSubmit(info.data.description);\n              }}\n              className={styles.chatPrompt}\n            />\n\n            <Prompts\n              items={[DESIGN_GUIDE]}\n              styles={{\n                item: {\n                  flex: 1,\n                  backgroundImage: 'linear-gradient(123deg, #e5f4ff 0%, #efe7ff 100%)',\n                  borderRadius: 12,\n                  border: 'none',\n                },\n                subItem: { background: '#ffffffa6' },\n              }}\n              onItemClick={info => {\n                onSubmit(info.data.description);\n              }}\n              className={styles.chatPrompt}\n            />\n          </Flex>\n        </Flex>\n      )}\n    </div>\n  );\n  const chatSender = (\n    <Flex\n      vertical\n      gap={12}\n      justify=\"center\"\n      style={{\n        marginInline: 24,\n      }}\n    >\n      {/* \u{1F31F} \u63D0\u793A\u8BCD */}\n      <Prompts\n        items={SENDER_PROMPTS}\n        onItemClick={info => {\n          onSubmit(info.data.description);\n        }}\n        styles={{\n          item: { padding: '6px 12px' },\n        }}\n        className={styles.senderPrompt}\n      />\n      {/* \u{1F31F} \u8F93\u5165\u6846 */}\n      <Sender\n        value={inputValue}\n        onSubmit={() => {\n          onSubmit(inputValue);\n          setInputValue('');\n        }}\n        onChange={setInputValue}\n        onCancel={() => {\n          abort();\n        }}\n        loading={isRequesting}\n        className={styles.sender}\n        placeholder={t.askMeAnything}\n      />\n    </Flex>\n  );\n  // ==================== Render =================\n  return (\n    <XProvider locale={locale}>\n      <ChatContext.Provider value={{ onReload }}>\n        {contextHolder}\n        <div className={styles.layout}>\n          {chatSide}\n          <div className={styles.chat}>\n            {chatList}\n            {chatSender}\n          </div>\n        </div>\n      </ChatContext.Provider>\n    </XProvider>\n  );\n};\nexport default AgentTbox;\n"}})})})});};},fa47f1a4:function(n,e,t){"use strict";t.d(e,"__esModule",{value:!0}),t.d(e,"texts",{enumerable:!0,get:function(){return o;}}),t("8b19df24");let o=[];}}]);
//# sourceMappingURL=38d2cf77-async.4455b421.js.map